function config(a,b,c){c.setBaseUrl("https://leancloud.cn/1.1"),c.setDefaultHeaders({"X-AVOSCloud-Application-Id":"zXmsYkXYionV4s9pHc3IKghD","X-AVOSCloud-Application-Key":"gHmRen4R5I3ziAE7wcP7vKw1"})}function routeConfig(a,b){b.otherwise("app/blank"),a.state("signin",{url:"/signin",templateUrl:"modules/signin/signin.html"})}function dataService(a){function b(a,b,c,d){var e=h.one(a);e.get(b).then(function(a){c(a)},function(a){d(a)})}function c(a,b,c,d){var e=h.one(a);e.get(b).then(function(a){c(a)},function(a){d(a)})}function d(a,b,c,d){console.log(c);var e=h.one(a,b);e.customPUT(c,null,null,g).then(function(a){d(a)},function(a){})}function e(a,b,c){console.log("save object"),h.post(a,b,null,g).then(function(a){c(a)},function(a){console.log(a)})}function f(a,b,c,d){var e=h.one(a,b);e.remove(c,g).then(function(a){d(a)},function(a){console.log(a)})}var g={"Content-Type":"application/json"},h=a.one("classes"),i={getAll:b,get:c,update:d,del:f,save:e};return i}function usersService(a){function b(a,b,c){e.get(a).then(function(a){b(a)},function(a){c(a)})}function c(a,b){console.log("save object"),e.post(a,b,null,d).then(function(a){console.log(a)},function(a){console.log(a)})}var d={"Content-Type":"application/json"},e=a.one("users"),f={get:b,save:c};return f}function rockUtil(a,b){function c(b,c,d,e){var f={};if("edit"==c&&1!=b.length)alert("务必选择一行数据");else{console.log(c),"edit"==c&&(f=angular.copy(b[0]));a.open({animation:!0,templateUrl:d,resolve:{operatOpts:function(){var a={};return a.editObj=f,"add"==c&&(a.oprTitle="新增"),"edit"==c&&(a.oprTitle="编辑"),a}},controller:function(a,b,c){a.operatOpts=c,a.ok=function(){e(c.editObj),b.close()},a.cancel=function(){b.dismiss("cancel")}}})}}var d={openEditModal:c};return d}function mainCtrl(a,b){b.appName=a}function appConfig(a){a.state("app",{url:"/app","abstract":!0,templateUrl:"modules/component/app/app.html",controller:"app"}).state("app.blank",{url:"/blank",views:{appContentView:{templateUrl:"modules/component/blank/blank.html"}}})}function app(a,b){function c(){console.log("load app controller success")}b.menus=a,c()}function appHeader(a,b,c){function d(b,d){c.data.selectMenu=d,a.go(b.url,{menus:b.subMenus})}c.appName=b,c.direct=d,c.data={}}function appSider(a,b,c){function d(){c.$broadcast("collapseAll")}function e(){c.$broadcast("collapseAll")}function f(a){console.log("toggle"),a.collapsed&&a.collapseAll(),a.toggle()}function g(a){c.data.selectMenu=a,b.go(a.url)}c.data={},c.data.menus=a.menus,c.data.toggle=f,c.data.direct=g,c.data.collapseTree=e,c.data.selectMenu,d()}function contentMgConfig(a){a.state("app.contentMg",{url:"/contentMg",params:{menus:null},views:{appContentView:{templateUrl:"modules/contentMg/contentMg.html",controller:"contentMg"}}}).state("app.contentMg.activityMg",{url:"/activityMg",views:{centerBoard:{templateUrl:"modules/contentMg/activityMg/activityMg.html",controller:"activityMg"}}}).state("app.contentMg.styleMg",{url:"/styleMg",views:{centerBoard:{templateUrl:"modules/contentMg/styleMg/styleMg.html",controller:"styleMg"}}}).state("app.contentMg.quoteMg",{url:"/quoteMg",views:{centerBoard:{templateUrl:"modules/contentMg/quoteMg/quoteMg.html",controller:"quoteMg"}}}).state("app.contentMg.projectMg",{url:"/projectMg",views:{centerBoard:{templateUrl:"modules/contentMg/projectMg/projectMg.html",controller:"projectMg"}}}).state("app.contentMg.subscribeMg",{url:"/subscribeMg",views:{centerBoard:{templateUrl:"modules/contentMg/subscribeMg/subscribeMg.html",controller:"subscribeMg"}}})}function contentMg(a){function b(){}b()}function activityMg(a){function b(){console.log("load activityMg controller success")}b()}function projectMg(a){function b(){console.log("load projectMg controller success")}b()}function quoteMg(a){function b(){console.log("load quoteMg controller success")}b()}function styleMg(a,b,c,d,e,f){function g(){m(),console.log("load styleMg controller success")}function h(b){function c(){return function(c){function e(){return function(a){f.setId(a.objectId),l(f)}}if("edit"==b)o(d[0].objectId,a.build(c),function(a){console.log(a),angular.merge(d[0],c)});else{console.log(c.images),c.images=i(c.images);var f=a.build(c);n(f,e())}}}var d=f.gridApi.selection.getSelectedRows();e.openEditModal(d,b,"editStyleModal.html",c())}function i(a){var b=angular.copy(a);return b.split(",")}function j(){var a=f.gridApi.selection.getSelectedRows();angular.forEach(a,function(a,b){p(a.objectId,function(a){console.log(a)})})}function k(a){f.styleMgGridOptions.data=a}function l(a){f.styleMgGridOptions.data.push(a)}function m(){d.getAll(a.name,null,function(a){k(a.results),console.log(a.results)})}function n(b,c){d.save(a.name,b,c)}function o(b,c,e){d.update(a.name,b,c,e)}function p(b,c){d.del(a.name,b,null,c)}f.data={},f.editStyleInfo=h,f.delStyleInfo=j,f.styleMgGridOptions={enableHorizontalScrollbar:c.scrollbars.NEVER,columnDefs:[{field:"objectId",displayName:"风格id",maxWidth:120,width:"30%"},{field:"name",displayName:"风格名称",maxWidth:150},{field:"avatar",displayName:"风格首页图",maxWidth:150},{field:"images",displayName:"风格详细图",maxWidth:150}],onRegisterApi:function(a){f.gridApi=a,a.selection.on.rowSelectionChanged(f,function(b){var c=a.selection.getSelectedRows().length;f.data.oneRowSelected=!1,f.data.multiRowSelected=!1,1===c&&(f.data.oneRowSelected=!0),c>1&&(f.data.multiRowSelected=!0)}),a.selection.on.rowSelectionChangedBatch(f,function(a){f.data.multiRowSelected=!0})}},angular.merge(f.styleMgGridOptions,b.exportOpts,b.baseOpts),g()}function subscribeMg(a){function b(){console.log("load subscribeMg controller success")}b()}function systemMgConfig(a){a.state("app.systemMg",{url:"/systemMg",params:{menus:null},views:{appContentView:{templateUrl:"modules/systemMg/systemMg.html",controller:"systemMg"}}}).state("app.systemMg.staffMg",{url:"/staffMg",views:{centerBoard:{templateUrl:"modules/systemMg/staffMg/staffMg.html",controller:"staffMg"}}}).state("app.systemMg.androidMg",{url:"/androidMg",views:{centerBoard:{templateUrl:"modules/systemMg/androidMg/androidMg.html",controller:"androidMg"}}})}function systemMg(a){function b(){}b()}function staffMg(a,b,c,d,e){function f(){}function g(){var a=e.gridApi.selection.getSelectedRows();angular.forEach(a,function(a,b){e.gridOptions.data.splice(e.gridOptions.data.lastIndexOf(a),1)})}function h(a){function b(){return function(b){"edit"==a?angular.merge(c[0],b):e.gridOptions.data.push(b)}}var c=e.gridApi.selection.getSelectedRows();d.openEditModal(c,a,"editStaffInfoModal.html",b())}e.deleteStaff=g,e.editStaffInfo=h,e.data={},e.gridOptions={enableHorizontalScrollbar:c.scrollbars.NEVER,columnDefs:[{field:"id",displayName:"员工编号",maxWidth:120,width:"30%"},{field:"name",displayName:"员工姓名",maxWidth:150},{field:"username",displayName:"登录账号",maxWidth:150},{field:"password",displayName:"登录密码",maxWidth:150}],onRegisterApi:function(a){e.gridApi=a,a.selection.on.rowSelectionChanged(e,function(b){var c=a.selection.getSelectedRows().length;e.data.oneRowSelected=!1,e.data.multiRowSelected=!1,1===c&&(e.data.oneRowSelected=!0),c>1&&(e.data.multiRowSelected=!0)}),a.selection.on.rowSelectionChangedBatch(e,function(a){e.data.multiRowSelected=!0})}},e.gridOptions.data=[{id:1,name:"棒槌",username:"1234",password:"*****"},{id:2,name:"棒槌2",username:"1234",password:"*****"}],angular.merge(e.gridOptions,b.exportOpts,b.baseOpts),f()}function androidMg(a,b,c,d,e){function f(){}function g(){var a=e.gridApi.selection.getSelectedRows();angular.forEach(a,function(a,b){e.gridOptions.data.splice(e.gridOptions.data.lastIndexOf(a),1)})}function h(a){function b(){return function(b){"edit"==a?angular.merge(c[0],b):e.gridOptions.data.push(b)}}var c=e.gridApi.selection.getSelectedRows();d.openEditModal(c,a,"editAndroidModal.html",b())}console.log("androidMg"),e.deleteAndroid=g,e.editAndroid=h,e.data={},e.gridOptions={enableHorizontalScrollbar:c.scrollbars.NEVER,columnDefs:[{field:"id",displayName:"版本编号",maxWidth:120,width:"30%"},{field:"version",displayName:"版本序号",maxWidth:150},{field:"updation",displayName:"版本改动",maxWidth:250},{field:"url",displayName:"版本下载地址",maxWidth:250}],onRegisterApi:function(a){e.gridApi=a,a.selection.on.rowSelectionChanged(e,function(b){var c=a.selection.getSelectedRows().length;e.data.oneRowSelected=!1,e.data.multiRowSelected=!1,1===c&&(e.data.oneRowSelected=!0),c>1&&(e.data.multiRowSelected=!0)}),a.selection.on.rowSelectionChangedBatch(e,function(a){e.data.multiRowSelected=!0})}},angular.merge(e.gridOptions,b.exportOpts,b.baseOpts),f()}function userMgConfig(a){a.state("app.userMg",{url:"/userMg",params:{menus:null},views:{appContentView:{templateUrl:"modules/userMg/userIndex.html",controller:"userMg"}}}).state("app.userMg.userList",{url:"/userList",views:{centerBoard:{templateUrl:"modules/userMg/userList/userList.html",controller:"userList"}}}).state("app.userMg.pointsMg",{url:"/pointsMg",views:{centerBoard:{templateUrl:"modules/userMg/pointsMg/pointsMg.html",controller:"pointsMg"}}}).state("app.userMg.styleCollectionMg",{url:"/styleCollectionMg",views:{centerBoard:{templateUrl:"modules/userMg/styleCollectionMg/styleCollectionMg.html",controller:"styleCollectionMg"}}}).state("app.userMg.userMsgMg",{url:"/userMsgMg",views:{centerBoard:{templateUrl:"modules/userMg/userMsgMg/userMsgMg.html",controller:"userMsgMg"}}})}function userMg(a){function b(){}b()}function userList(a,b,c,d,e,f){function g(){function a(){return function(a){f.gridOptions.data=a.results}}function b(){return function(a){}}e.get(null,a(),b())}f.data={},f.gridOptions={enableHorizontalScrollbar:c.scrollbars.NEVER,columnDefs:[{field:"objectId",displayName:"用户id",maxWidth:120,width:"30%"},{field:"username",displayName:"用户账号",maxWidth:150},{field:"mobilePhoneNumber",displayName:"手机号码",maxWidth:150}],onRegisterApi:function(a){f.gridApi=a,a.selection.on.rowSelectionChanged(f,function(b){console.log(b.entity);var c=a.selection.getSelectedRows().length;f.data.oneRowSelected=!1,f.data.multiRowSelected=!1,1===c&&(f.data.oneRowSelected=!0),c>1&&(f.data.multiRowSelected=!0)}),a.selection.on.rowSelectionChangedBatch(f,function(a){f.data.multiRowSelected=!0})}},angular.merge(f.gridOptions,b.exportOpts,b.baseOpts),g()}function pointsMg(a){function b(){console.log("load pointsMg controller success")}b()}function userMsgMg(a){function b(){console.log("load userMsgMg controller success")}b()}function styleCollectionMg(a){function b(){console.log("load styleCollectionMg controller success")}b()}angular.module("app",["app.core","app.config","app.value","app.service","app.directive","app.controller"]),angular.module("app.core",["restangular","ui.bootstrap","ui.tree","ui.grid","ui.grid.edit","ui.grid.selection","ui.grid.exporter","ui.grid.resizeColumns","ui.grid.moveColumns","ui.router"]),angular.module("app.config",["ui.router"]),angular.module("app.service",[]),angular.module("app.value",[]),angular.module("app.controller",[]),angular.module("app.directive",[]),angular.module("app.config").config(["$stateProvider","$urlRouterProvider","RestangularProvider",config]),angular.module("app.config").config(["$stateProvider","$urlRouterProvider",routeConfig]),angular.module("app.value").value("appName","易装修后台管理平台"),angular.module("app.value").value("menus",[{name:"内容管理",url:"app.contentMg",subMenus:[{name:"活动管理",url:"",subMenus:[{name:"活动管理",url:"app.contentMg.activityMg"}]},{name:"风格管理",url:"",subMenus:[{name:"风格管理",url:"app.contentMg.styleMg"},{name:"预约管理",url:"app.contentMg.subscribeMg"}]},{name:"服务管理",url:"",subMenus:[{name:"项目管理",url:"app.contentMg.projectMg"},{name:"报价管理",url:"app.contentMg.quoteMg"}]}]},{name:"用户管理",url:"app.userMg",subMenus:[{name:"用户管理",url:"",subMenus:[{name:"用户列表",url:"app.userMg.userList"},{name:"用户积分管理",url:"app.userMg.pointsMg"},{name:"风格收藏管理",url:"app.userMg.styleCollectionMg"},{name:"用户消息管理",url:"app.userMg.userMsgMg"}]}]},{name:"系统设置",url:"app.systemMg",subMenus:[{name:"员工管理",url:"",subMenus:[{name:"员工管理",url:"app.systemMg.staffMg"}]},{name:"APP管理",url:"",subMenus:[{name:"安卓版本管理",url:"app.systemMg.androidMg"}]}]}]),angular.module("app.value").value("gridOpts",{exportOpts:{exporterCsvFilename:"myFile.csv",exporterPdfDefaultStyle:{fontSize:9},exporterPdfTableStyle:{margin:[30,30,30,30]},exporterPdfTableHeaderStyle:{fontSize:10,bold:!0,italics:!0,color:"red"},exporterPdfHeader:{text:"My Header",style:"headerStyle"},exporterPdfFooter:function(a,b){return{text:a.toString()+" of "+b.toString(),style:"footerStyle"}},exporterPdfCustomFormatter:function(a){return a.styles.headerStyle={fontSize:22,bold:!0},a.styles.footerStyle={fontSize:10,bold:!0},a},exporterPdfOrientation:"portrait",exporterPdfPageSize:"LETTER",exporterPdfMaxGridWidth:500,exporterCsvLinkElement:angular.element(document.querySelectorAll(".custom-csv-link-location"))},baseOpts:{enableGridMenu:!0,enableSorting:!0,enableColumnResizing:!0,enableRowSelection:!0,enableSelectAll:!0}}),angular.module("app.controller").factory("Style",function(){function a(a,b,c,d){this.objectId=a,this.name=b,this.avatar=c,this.images=d}return a.prototype.toString=function(){return a.name},a.prototype.setId=function(a){this.objectId=a},a.build=function(b){return new a(b.objectId,b.name,b.avatar,b.images)},a}),angular.module("app.controller").factory("UserInfo",function(){function a(a,b,c,d){this.userId=a,this.alias=b,this.roomstatus=c,this.roomarea=d}a.prototype.toString=function(){return a.name},a.prototype.setId=function(a){this.userId=a},a.prototype.setRoomStatus=function(a){this.roomstatus=a};var b=["admin","editor","guest"];return a.possibleRoles=angular.copy(b),a.build=function(b){return new a(b.userId,b.alias,b.roomstatus,b.roomarea)},a}),angular.module("app.service").factory("dataService",dataService),dataService.$inject=["Restangular"],angular.module("app.service").factory("usersService",usersService),usersService.$inject=["Restangular"],angular.module("app.service").factory("rockUtil",rockUtil),rockUtil.$inject=["$modal","Restangular"],angular.module("app.controller").controller("mainCtrl",mainCtrl),mainCtrl.$inject=["appName","$scope"],angular.module("app.config").config(["$stateProvider",appConfig]),angular.module("app.controller").controller("app",app),app.$inject=["menus","$scope"],angular.module("app.directive").directive("appHeader",function(){function a(a,b,c){}var b={link:a,templateUrl:"modules/component/appHeader/appHeader.html",scope:{menus:"="},restrict:"E",controller:"appHeader"};return b}),angular.module("app.controller").controller("appHeader",appHeader),appHeader.$inject=["$state","appName","$scope"],angular.module("app.directive").directive("appSider",function(){function a(a,b,c){}var b={link:a,templateUrl:"modules/component/appSider/appSider.html",scope:{},controller:"appSider"};return b}),angular.module("app.controller").controller("appSider",appSider),appSider.$inject=["$stateParams","$state","$scope"],angular.module("app.config").config(["$stateProvider",contentMgConfig]),angular.module("app.controller").controller("contentMg",contentMg),contentMg.$inject=["$scope"],angular.module("app.controller").controller("activityMg",activityMg),activityMg.$inject=["$scope"],angular.module("app.controller").controller("projectMg",projectMg),projectMg.$inject=["$scope"],angular.module("app.controller").controller("quoteMg",quoteMg),quoteMg.$inject=["$scope"],angular.module("app.controller").controller("styleMg",styleMg),styleMg.$inject=["Style","gridOpts","uiGridConstants","dataService","rockUtil","$scope"],angular.module("app.controller").controller("subscribeMg",subscribeMg),subscribeMg.$inject=["$scope"],angular.module("app.config").config(["$stateProvider",systemMgConfig]),angular.module("app.controller").controller("systemMg",systemMg),systemMg.$inject=["$scope"],angular.module("app.controller").controller("staffMg",staffMg),staffMg.$inject=["$modal","gridOpts","uiGridConstants","rockUtil","$scope"],angular.module("app.controller").controller("androidMg",androidMg),androidMg.$inject=["$modal","gridOpts","uiGridConstants","rockUtil","$scope"],angular.module("app.config").config(["$stateProvider",userMgConfig]),angular.module("app.controller").controller("userMg",userMg),userMg.$inject=["$scope"],angular.module("app.controller").controller("userList",userList),userList.$inject=["$modal","gridOpts","uiGridConstants","dataService","usersService","$scope"],angular.module("app.controller").controller("pointsMg",pointsMg),pointsMg.$inject=["$scope"],angular.module("app.controller").controller("userMsgMg",userMsgMg),userMsgMg.$inject=["$scope"],angular.module("app.controller").controller("styleCollectionMg",styleCollectionMg),styleCollectionMg.$inject=["$scope"];